{{> header}}
	<div class="container">
		<div class="row-fluid">
			<h3> Hello, {{userProfile.displayName}}! You are currently signed in as {{userProfile.username}} on {{userProfile.provider}}! </h3>
		</div>
		<div class="row-fluid">
			<div class="panel panel-default">
				<header class="panel-heading">
					<h4>{{userProfile.displayName}} 
						<small>aka {{userProfile.username}}</small>
					</h4>
					<a href="/twit/json">User JSON</a>
				</header>
				<div class="panel-body">
					<div class="col-lg-12">
						<div class="col-lg-6">
							<div class="row-fluid">
								The number of people following you is <span id="followers">{{userProfile._json.followers_count}}</span>.
							</div>
							<div class="row-fluid">
								The number of people you are following is <span id="following">{{userProfile._json.friends_count}}</span>.
							</div>
							<div class="row-fluid">
								<h2> Your Follower to Following ratio is:</h2>
								<h1 id="ratio"> </h1>
								<span id="displayMessage"> </span>
								<div id="ratioBar" class="progress progress-striped active">
								  	<div class="progress-bar"  role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
								  	</div>
								</div>
							</div>
						</div>
						<div class="col-lg-6">
							<div class="row-fluid">
								<h4> Your last status was on {{userProfile._json.status.created_at}} </h4>
							</div>
							<div class="row-fluid">
								You said:
							</div>
							<div class="row-fluid">
								<h3>
									<i> "{{userProfile._json.status.text}}" </i>
								</h3>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
{{> globaljs}}
<script>
	$(document).ready( function (){

		// calculate follower:following ratio
		var numFollowers = $('#followers').text()
		var numFollowing = $('#following').text();

		var rawRatio = numFollowers/numFollowing;
		var ratio = Math.floor(rawRatio * 100) / 100;  // truncate
		var percentage = ratio * 100;

		// area to append ratio
		var ratioDisplay = $('#ratio');
		var displayMessage = $('#displayMessage');

		// progressbar
		var bar = $('#ratioBar');

		// display messages
		var low = "Hmmm... That's a low score.  Have you gotten all of your friends to follow you?";
		var med = "Not bad! Try tapping into your Facebook friends if you haven't already.";
		var high = "Are you a celebrity?!";

		if( ratio < .5 ) {
			// number
			ratioDisplay.text(ratio);
			// message
			displayMessage.text(low);
			// bar color
			bar.addClass('progress-bar-danger');

		} else if ( ratio < 1 ) {
			ratioDisplay.text(ratio);
			displayMessage.text(med);
			bar.addClass('progress-bar-warning');
		} else {
			ratioDisplay.text(ratio);
			displayMessage.text(high);
			bar.addClass('progress-bar-success');
		}

		// set the bar
		bar.attr('aria-valuenow', percentage);
		bar.css('width', percentage);

	});
</script>

{{> footer}}